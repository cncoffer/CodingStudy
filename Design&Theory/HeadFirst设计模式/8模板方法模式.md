封装算法...

### 6-28 ###

定义
模板方法模式: 在一个方法中定义一个算法的步骤, 而将一些步骤延迟到子类中. 模板方法使得子类可以在不改变算法结构的情况下, 重新定义算法中的某些步骤.

模板方法就是建立一个算法模板, 比如查找算法暴露出来的接口是find, 但是具体用的是二分查找还是便利, 可以由子类去具体实现.

在这书中第一次接触到钩子, 这可能也是我第一次系统的学习钩子呢.
钩子一般有默认或者空的实现, 子类可以自行决定是否需要覆盖, 而钩子的存在让子类有能力对算法的不同点进行挂钩.

钩子和抽象方法是不同的, 抽象方法必须实现, 而钩子是可选项.
抽象方法在模板算法中是定死的, 而钩子则可以为抽象算法的流程作出一定的改变. 或者在改变时调用, 如刷新屏幕?

好莱坞原则: 别调用我们, 我们会调用你.

这一原则主要是为了解决这样的问题: 当高层组件依赖底层组件, 而底层组件又依赖高层组件, 而高层组件又依赖边侧组件...
这样就没人能搞懂系统是怎样运行的了.
而好莱坞原则就解决了这一问题, 允许底层组件将自己挂钩到系统上, 但是高层组件会觉得什么时候和怎样使用这些底层组件. 让依赖变成单向的.

那么这里想到, 对于我之前刚修改的fisheye中子类和父类通信方式的代码, 似乎是高层依赖底层, 底层又依赖高层了呢... 不过用消息的方式应该已经是比较好的选择了吧

然后看到后面才发现, 原来我已经用了这么多的钩子了啊, 比如重新构造的oninitdialog, 比如onclickok等等.

在Ruby中的快语句, 可以说是模板方法模式的最佳实践了, 在任何地方都可以用呢.