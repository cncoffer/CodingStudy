# 18 表达式模板

表达式模板和上一章的metaprogram是互补的, metaprogram主要用于小的,大小固定的数组, 而表示式模板用于中等大小,大小在运行期确定的数组.

# 18.1 临时变量和分割循环

今天第一次知道原来在构造函数的默认参数中可以用new. 比如下面这样
    class MyClass {
    public:
        MyClass(int size) : m_storage(new int[size]), m_size(size) {}
        ~MyClass() {delete[] m_storage;}

    private:
        int *m_storage;
        int m_size;
    }

# 18.2 在模板实参中编码表达式

看了这里的例子, 我首先想到的是数量小的循环应该使用手工编写, 数量大的循环应该使用并行计算.
严格来说, 使用模板来展开的意义不是特别大. 不过写出来的代码倒是会比较优雅(装逼).

具体例子直接看书吧, 有点复杂了.

这东西应该在工业级的产品, 对性能要求特别高的地方能够用上, 像我平时写写业务逻辑来说, 估计是没派得上用场的地方.